type DiagnosticBag {
	errors: [SyntaxError]
	len: i32
}

func DiagnosticBag(): DiagnosticBag {
	const max = 50

	return new DiagnosticBag { errors: new [SyntaxError, max] { } }
}

func `[]`(bag: DiagnosticBag, index: i32): SyntaxError {
	return bag.errors[index]
}

func (this: *DiagnosticBag) report(msg: str, pos: TextPos) {
	(*this).errors[(*this).len++] = SyntaxError(msg, pos)
}